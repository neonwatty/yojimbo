@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════
   NORD-INSPIRED COLOR PALETTE (Ghostty Theme)
   ═══════════════════════════════════════════════════════════════════════ */

/* LIGHT THEME (default) - Nord Snow Storm */
:root {
  /* Surfaces */
  --surface-900: #eceff4;  /* base background */
  --surface-800: #e5e9f0;  /* elevated surfaces */
  --surface-700: #d8dee9;  /* cards, inputs */
  --surface-600: #c8ced9;  /* borders, dividers */
  --surface-500: #a9b1bf;  /* muted elements */

  /* Text */
  --text-primary: #2e3440;
  --text-secondary: #3b4252;
  --text-muted: #4c566a;
  --text-dim: #7b88a1;

  /* Accent - warm orange */
  --accent: #c9703a;
  --accent-bright: #d08770;
  --accent-dim: #a85a32;

  /* Frost (blues/cyans for active states) */
  --frost-1: #7aada8;
  --frost-2: #5e9dab;
  --frost-3: #6b8eb5;
  --frost-4: #4d7096;

  /* Status colors */
  --state-working: #7fab7c;
  --state-awaiting: #d4b356;
  --state-idle: #7b88a1;
  --state-error: #b5545e;

  --border-color: #c8ced9;
}

/* DARK THEME - Nord Polar Night */
.dark {
  /* Surfaces */
  --surface-900: #2e3440;
  --surface-800: #3b4252;
  --surface-700: #434c5e;
  --surface-600: #4c566a;
  --surface-500: #5e6779;

  /* Text */
  --text-primary: #eceff4;
  --text-secondary: #e5e9f0;
  --text-muted: #d8dee9;
  --text-dim: #7b88a1;

  /* Accent - aurora orange */
  --accent: #d08770;
  --accent-bright: #ebcb8b;
  --accent-dim: #bf616a;

  /* Frost */
  --frost-1: #8fbcbb;
  --frost-2: #88c0d0;
  --frost-3: #81a1c1;
  --frost-4: #5e81ac;

  /* Status colors */
  --state-working: #a3be8c;
  --state-awaiting: #ebcb8b;
  --state-idle: #7b88a1;
  --state-error: #bf616a;

  --border-color: #4c566a;
}

/* ═══════════════════════════════════════════════════════════════════════
   ENVIRONMENT-BASED ACCENT COLORS
   Dev = Orange/Amber (warm), Prod = Teal/Cyan (cool)
   ═══════════════════════════════════════════════════════════════════════ */

/* DEV Environment - warm orange (keeps current default) */
:root.env-dev {
  --accent: #c9703a;
  --accent-bright: #d08770;
  --accent-dim: #a85a32;
}

.dark.env-dev {
  --accent: #d08770;
  --accent-bright: #ebcb8b;
  --accent-dim: #bf616a;
}

/* STAGE Environment - aurora purple */
:root.env-stage {
  --accent: #9b7bb8;
  --accent-bright: #b48ead;
  --accent-dim: #7c5a9c;
}

.dark.env-stage {
  --accent: #b48ead;
  --accent-bright: #c9a5c4;
  --accent-dim: #9b7bb8;
}

/* PROD Environment - cool teal/cyan */
:root.env-prod {
  --accent: #5e9dab;
  --accent-bright: #7aada8;
  --accent-dim: #4d7096;
}

.dark.env-prod {
  --accent: #88c0d0;
  --accent-bright: #8fbcbb;
  --accent-dim: #5e81ac;
}

* {
  box-sizing: border-box;
}

body {
  background: var(--surface-900);
  font-family: 'JetBrains Mono', monospace;
  color: var(--text-primary);
  margin: 0;
  padding: 0;
  font-size: 13px;
}

/* Scrollbar styling - slim and subtle */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--surface-500);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--surface-600);
}

/* Terminal text */
.terminal-text {
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  line-height: 1.5;
}

/* Status pulse animation */
@keyframes pulse-glow {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 var(--state-working);
  }
  50% {
    opacity: 0.7;
    box-shadow: 0 0 0 4px transparent;
  }
}

@keyframes pulse-ring {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

.pulse-working {
  animation: pulse-glow 2s ease-in-out infinite;
  position: relative;
}

.pulse-working::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: var(--state-working);
  animation: pulse-ring 2s ease-out infinite;
}

/* Active glow effect - subtle frost highlight */
.active-glow {
  box-shadow: 0 0 0 1px var(--frost-4);
}

/* Card elevated style - flat, no blur */
.card-elevated {
  background: var(--surface-700);
  border: 1px solid var(--border-color);
}

:root .card-elevated {
  background: var(--surface-700);
  border: 1px solid var(--border-color);
}

/* Terminal glow effect - removed for flat design */
.terminal-glow {
  position: relative;
  overflow: visible;
}

/* Background atmosphere - simplified flat gradient */
.bg-atmosphere {
  background: linear-gradient(180deg, var(--surface-800) 0%, var(--surface-900) 100%);
}

/* Hover effects - subtle for terminal aesthetic */
.hover-lift {
  transition: background-color 0.15s ease;
}

.hover-lift:hover {
  /* No transform - flat design */
}

.press-effect:active {
  opacity: 0.9;
}

.hover-scale {
  transition: opacity 0.15s ease;
}

.hover-scale:hover {
  opacity: 0.8;
}

/* Resize handles */
.resize-handle-h {
  width: 2px;
  cursor: col-resize;
  background: var(--surface-600);
  transition: background 0.2s;
}

.resize-handle-h:hover {
  background: var(--frost-3);
}

.resize-handle-v {
  height: 2px;
  cursor: row-resize;
  background: var(--surface-600);
  transition: background 0.2s;
}

.resize-handle-v:hover {
  background: var(--frost-3);
}

/* Animation delays */
.delay-1 { animation-delay: 0.08s; }
.delay-2 { animation-delay: 0.16s; }
.delay-3 { animation-delay: 0.24s; }
.delay-4 { animation-delay: 0.32s; }
.delay-5 { animation-delay: 0.4s; }

/* Toast animations */
@keyframes toast-in {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes toast-out {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

.animate-toast-in {
  animation: toast-in 0.3s ease-out forwards;
}

.animate-toast-out {
  animation: toast-out 0.2s ease-in forwards;
}

/* MDX Editor Styling */
.mdx-editor-wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.mdx-editor-wrapper .mdxeditor {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: transparent;
  border: none;
}

.mdx-editor-wrapper .mdxeditor-root-contenteditable {
  flex: 1;
  overflow: auto;
}

/* Dark theme overrides */
.mdx-editor-wrapper.dark-theme .mdxeditor {
  --accentColor: var(--frost-2);
  --accentColorLight: rgba(136, 192, 208, 0.2);
  --basePageBg: var(--surface-900);
  --baseBgColor: var(--surface-800);
  --baseTextColor: var(--text-primary);
  --baseTextColorSecondary: var(--text-secondary);
  --borderColor: var(--border-color);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-toolbar {
  background: var(--surface-700);
  border-bottom: 1px solid var(--surface-600);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-toolbar button {
  color: var(--text-secondary);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-toolbar button:hover {
  background: var(--surface-600);
  color: var(--text-primary);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-toolbar button[data-state="on"] {
  background: rgba(136, 192, 208, 0.2);
  color: var(--frost-2);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-popup-container {
  background: var(--surface-700);
  border: 1px solid var(--surface-600);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-select-content {
  background: var(--surface-700);
  border: 1px solid var(--surface-600);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-select-item {
  color: var(--text-secondary);
}

.mdx-editor-wrapper.dark-theme .mdxeditor-select-item:hover,
.mdx-editor-wrapper.dark-theme .mdxeditor-select-item[data-highlighted] {
  background: var(--surface-600);
  color: var(--text-primary);
}

/* Light theme overrides */
.mdx-editor-wrapper.light-theme .mdxeditor {
  --accentColor: var(--frost-3);
  --accentColorLight: rgba(107, 142, 181, 0.15);
  --basePageBg: var(--surface-900);
  --baseBgColor: var(--surface-800);
  --baseTextColor: var(--text-primary);
  --baseTextColorSecondary: var(--text-secondary);
  --borderColor: var(--border-color);
}

.mdx-editor-wrapper.light-theme .mdxeditor-toolbar {
  background: var(--surface-700);
  border-bottom: 1px solid var(--surface-600);
}

.mdx-editor-wrapper.light-theme .mdxeditor-toolbar button[data-state="on"] {
  background: rgba(107, 142, 181, 0.2);
  color: var(--frost-3);
}

/* Editor content styling */
.mdx-editor-content {
  padding: 1rem;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.8125rem;
  line-height: 1.6;
  min-height: 100%;
  color: var(--text-primary);
}

/* Ensure dark theme text color is applied */
.mdx-editor-wrapper.dark-theme .mdx-editor-content {
  color: #ffffff;
}

.mdx-editor-wrapper.dark-theme .mdx-editor-content * {
  color: inherit;
}

.mdx-editor-wrapper.dark-theme .mdx-editor-content h1,
.mdx-editor-wrapper.dark-theme .mdx-editor-content h2,
.mdx-editor-wrapper.dark-theme .mdx-editor-content h3,
.mdx-editor-wrapper.dark-theme .mdx-editor-content h4,
.mdx-editor-wrapper.dark-theme .mdx-editor-content h5,
.mdx-editor-wrapper.dark-theme .mdx-editor-content h6 {
  color: #ffffff;
}

.mdx-editor-wrapper.dark-theme .mdx-editor-content p,
.mdx-editor-wrapper.dark-theme .mdx-editor-content li {
  color: #d1d5db;
}

.mdx-editor-content h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 1.5rem 0 0.75rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--surface-600);
}

.mdx-editor-content h2 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 1.25rem 0 0.5rem 0;
}

.mdx-editor-content h3 {
  font-size: 1.125rem;
  font-weight: 600;
  margin: 1rem 0 0.5rem 0;
}

.mdx-editor-content p {
  margin: 0.75rem 0;
}

.mdx-editor-content a {
  color: var(--frost-2);
  text-decoration: underline;
}

.mdx-editor-content a:hover {
  color: var(--frost-1);
}

.mdx-editor-content code {
  background: var(--surface-700);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.8125rem;
}

.mdx-editor-content pre {
  background: var(--surface-700);
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.mdx-editor-content pre code {
  background: transparent;
  padding: 0;
}

.mdx-editor-content blockquote {
  border-left: 2px solid var(--frost-3);
  padding-left: 1rem;
  margin: 1rem 0;
  color: var(--text-secondary);
  font-style: italic;
}

.mdx-editor-content ul,
.mdx-editor-content ol {
  margin: 0.75rem 0;
  padding-left: 1.5rem;
}

.mdx-editor-content li {
  margin: 0.25rem 0;
}

.mdx-editor-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.mdx-editor-content th,
.mdx-editor-content td {
  border: 1px solid var(--surface-600);
  padding: 0.5rem 0.75rem;
  text-align: left;
}

.mdx-editor-content th {
  background: var(--surface-700);
  font-weight: 600;
}

.mdx-editor-content hr {
  border: none;
  border-top: 1px solid var(--surface-600);
  margin: 1.5rem 0;
}

/* ═══════════════════════════════════════════════════════════════════════
   LIGHT THEME TERMINAL PANEL - Keep terminal dark for readability
   ═══════════════════════════════════════════════════════════════════════ */

:root .terminal-panel {
  background: #2e3440;
  border: 1px solid var(--surface-500);
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

:root .terminal-panel .terminal-text {
  color: #eceff4;
}

.dark .terminal-panel {
  background: var(--surface-900);
  border: 1px solid var(--surface-600);
  box-shadow: none;
}

/* ═══════════════════════════════════════════════════════════════════════
   TOAST NOTIFICATIONS - Ghostty/Nord themed
   ═══════════════════════════════════════════════════════════════════════ */

.toast-container {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.toast {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 6px;
  font-size: 0.8125rem;
  font-family: 'JetBrains Mono', monospace;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  max-width: 360px;
}

.toast-success {
  background: var(--surface-700);
  border: 1px solid var(--state-working);
  color: var(--text-primary);
}

.toast-success::before {
  content: '✓';
  color: var(--state-working);
  font-weight: bold;
}

.toast-error {
  background: var(--surface-700);
  border: 1px solid var(--state-error);
  color: var(--text-primary);
}

.toast-error::before {
  content: '✕';
  color: var(--state-error);
  font-weight: bold;
}

.toast-warning {
  background: var(--surface-700);
  border: 1px solid var(--state-awaiting);
  color: var(--text-primary);
}

.toast-warning::before {
  content: '⚠';
  color: var(--state-awaiting);
}

.toast-info {
  background: var(--surface-700);
  border: 1px solid var(--frost-2);
  color: var(--text-primary);
}

.toast-info::before {
  content: 'ℹ';
  color: var(--frost-2);
}

/* ═══════════════════════════════════════════════════════════════════════
   CONNECTION STATUS INDICATOR
   ═══════════════════════════════════════════════════════════════════════ */

.connection-status {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.6875rem;
  font-family: 'JetBrains Mono', monospace;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.connection-status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}

.connection-status.connected .connection-status-dot {
  background: var(--state-working);
  box-shadow: 0 0 4px var(--state-working);
}

.connection-status.disconnected .connection-status-dot {
  background: var(--state-error);
}

.connection-status.connecting .connection-status-dot {
  background: var(--state-awaiting);
  animation: pulse-glow 1s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════════════════════════════
   REVEAL ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════ */

@keyframes reveal-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-reveal-up {
  animation: reveal-up 0.3s ease-out forwards;
  opacity: 0;
}

/* ═══════════════════════════════════════════════════════════════════════
   ANIMATE-IN UTILITIES (similar to tailwindcss-animate)
   ═══════════════════════════════════════════════════════════════════════ */

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-from-top {
  from { transform: translateY(-0.5rem); }
  to { transform: translateY(0); }
}

@keyframes slide-in-from-bottom {
  from { transform: translateY(0.5rem); }
  to { transform: translateY(0); }
}

@keyframes scale-in {
  from { transform: scale(0.95); }
  to { transform: scale(1); }
}

.animate-in {
  animation-duration: 0.2s;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  animation-fill-mode: both;
}

.animate-in.fade-in {
  animation-name: fade-in;
}

.animate-in.slide-in-from-top-2 {
  animation-name: fade-in, slide-in-from-top;
}

.animate-in.slide-in-from-bottom {
  animation-name: fade-in, slide-in-from-bottom;
}

.animate-in.scale-in {
  animation-name: fade-in, scale-in;
}

.animate-in.duration-200 {
  animation-duration: 200ms;
}

.animate-in.duration-300 {
  animation-duration: 300ms;
}

/* ═══════════════════════════════════════════════════════════════════════
   MOBILE LAYOUT STYLES
   ═══════════════════════════════════════════════════════════════════════ */

/* Prevent iOS bounce/overscroll on mobile */
@media (max-width: 767px) {
  html, body {
    position: fixed;
    width: 100%;
    height: 100%;
    overflow: hidden;
    overscroll-behavior: none;
    /* Use pan-y to allow vertical scrolling in child elements while preventing horizontal pan */
    touch-action: pan-y;
  }

  #root {
    height: 100dvh;
    width: 100vw;
    overflow: hidden;
    touch-action: pan-y;
  }

  /* Disable text selection on touch */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Allow scrolling in specific containers */
  .mobile-scroll {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    touch-action: pan-y !important;
  }

  /* Allow touch interaction for interactive elements */
  button, a, input, textarea, [role="button"] {
    touch-action: manipulation !important;
  }

  /* Allow touch scrolling in xterm terminal */
  .xterm {
    touch-action: pan-y !important;
  }
  .xterm-viewport {
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch;
  }

  /* Touch-friendly active states */
  .touch-active:active {
    transform: scale(0.98);
    opacity: 0.9;
  }
}

/* Mobile drawer transitions */
.mobile-drawer {
  transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
}

.mobile-backdrop {
  transition: opacity 0.2s ease-out;
}
